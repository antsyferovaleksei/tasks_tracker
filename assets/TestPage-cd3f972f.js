import{j as e,B as a,g as s,a6 as t,a7 as r,m as n,U as i,X as c,h as l}from"./mui-56a233f4.js";import{r as o}from"./vendor-2c736f18.js";import{v as d}from"./index-566e1fcc.js";import"./utils-18e1ec00.js";function h(){const[h,x]=o.useState(!1),[j,m]=o.useState(""),[u,p]=o.useState(""),[g,v]=o.useState({email:"admin@admin.com",password:"admin123"}),[b,y]=o.useState({name:"Test Project з UI",description:"Project description created with UI",color:"#2196f3",archived:!1}),[f,C]=o.useState(!1),[P,w]=o.useState([]),[I,S]=o.useState(""),k=async()=>{try{const e=await d.getProjects();e.success&&e.data&&w(e.data)}catch(e){m(e.response?.data?.message||"Loading error projects")}};return e.jsxs(a,{p:3,maxWidth:800,mx:"auto",children:[e.jsx(s,{variant:"h4",mb:3,children:"Тестова сторінка API"}),e.jsx(t,{sx:{mb:3},children:e.jsxs(r,{children:[e.jsx(s,{variant:"h6",mb:2,children:"0. Health Check API"}),e.jsx(n,{variant:"outlined",onClick:async()=>{x(!0),m("");try{const e=await d.healthCheck();S(`API працює! ${e.timestamp}`),p("Health check пройшов успішно!")}catch(e){m("API недоступний: "+(e.message||"Невідома помилка"))}finally{x(!1)}},disabled:h,startIcon:h?e.jsx(i,{size:20}):null,sx:{mb:2},children:h?"Перевіряю...":"Перевірити API"}),I&&e.jsx(s,{variant:"body2",color:"success.main",children:I})]})}),j&&e.jsx(c,{severity:"error",sx:{mb:2},children:j}),u&&e.jsx(c,{severity:"success",sx:{mb:2},children:u}),f?e.jsxs(a,{children:[e.jsx(t,{sx:{mb:3},children:e.jsxs(r,{children:[e.jsx(s,{variant:"h6",mb:2,children:"2. Create project"}),e.jsxs(a,{display:"flex",flexDirection:"column",gap:2,children:[e.jsx(l,{label:"Project name",value:b.name,onChange:e=>y({...b,name:e.target.value})}),e.jsx(l,{label:"Description",value:b.description,onChange:e=>y({...b,description:e.target.value}),multiline:!0,rows:3}),e.jsx(l,{label:"Color",type:"color",value:b.color,onChange:e=>y({...b,color:e.target.value})}),e.jsx(n,{variant:"contained",onClick:async()=>{x(!0),m("");try{(await d.createProject(b)).success&&(p("Project created successfully!"),k())}catch(e){m(e.response?.data?.message||"Error creating project")}finally{x(!1)}},disabled:h||!b.name,startIcon:h?e.jsx(i,{size:20}):null,children:h?"Creating...":"Create project"})]})]})}),e.jsx(t,{children:e.jsxs(r,{children:[e.jsx(s,{variant:"h6",mb:2,children:"3. Існуючі projectи"}),e.jsx(n,{onClick:k,variant:"outlined",sx:{mb:2},children:"Оновити список"}),P.length>0?P.map((t=>e.jsxs(a,{p:2,border:"1px solid #ddd",borderRadius:1,mb:1,children:[e.jsx(s,{variant:"subtitle1",children:t.name}),e.jsx(s,{variant:"body2",color:"text.secondary",children:t.description}),e.jsxs(s,{variant:"caption",children:["Створено: ",new Date(t.createdAt).toLocaleString()]})]},t.id))):e.jsx(s,{color:"text.secondary",children:"Projects не знайдено"})]})})]}):e.jsx(t,{sx:{mb:3},children:e.jsxs(r,{children:[e.jsx(s,{variant:"h6",mb:2,children:"1. Вхід в систему"}),e.jsxs(a,{display:"flex",flexDirection:"column",gap:2,children:[e.jsx(l,{label:"Email",type:"email",value:g.email,onChange:e=>v({...g,email:e.target.value})}),e.jsx(l,{label:"Password",type:"password",value:g.password,onChange:e=>v({...g,password:e.target.value})}),e.jsx(n,{variant:"contained",onClick:async()=>{x(!0),m("");try{const e=await d.login(g);e.success&&e.data&&(localStorage.setItem("accessToken",e.data.accessToken),localStorage.setItem("refreshToken",e.data.refreshToken),C(!0),p("Success login!"))}catch(e){m(e.response?.data?.message||"Login error")}finally{x(!1)}},disabled:h,startIcon:h?e.jsx(i,{size:20}):null,children:h?"Login...":"Login"})]})]})})]})}export{h as default};
