import{j as s,B as a,U as t,g as e,m as i,ak as r,a5 as n,a6 as d,a7 as c}from"./mui-56a233f4.js";import{q as l,r as x}from"./index-566e1fcc.js";import{R as o,B as h,C as j,X as m,Y as p,T as y,a as u,P as g,b as f,c as b}from"./charts-2283d87c.js";import"./vendor-2c736f18.js";import"./utils-18e1ec00.js";const v=["#0088FE","#00C49F","#FFBB28","#FF8042"];function B(){const{data:B,isLoading:C}=l(30),{mutate:k,isPending:S}=x();if(C)return s.jsx(a,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:s.jsx(t,{})});const F=B?.data?.summary,I=B?.data?.charts;return s.jsxs(a,{p:3,children:[s.jsxs(a,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[s.jsx(e,{variant:"h4",component:"h1",children:"Analytics"}),s.jsx(i,{variant:"contained",startIcon:s.jsx(r,{}),onClick:()=>{k({format:"csv",params:{period:30,summary:B?.data?.summary,charts:B?.data?.charts,type:"analytics"}})},disabled:S||!B?.data,children:S?"Exporting...":"Export into CSV"})]}),s.jsxs(n,{container:!0,spacing:3,mb:4,children:[s.jsx(n,{item:!0,xs:12,sm:6,md:4,children:s.jsx(d,{children:s.jsxs(c,{children:[s.jsx(e,{color:"textSecondary",gutterBottom:!0,children:"All tasks"}),s.jsx(e,{variant:"h4",children:F?.totalTasks||0})]})})}),s.jsx(n,{item:!0,xs:12,sm:6,md:4,children:s.jsx(d,{children:s.jsxs(c,{children:[s.jsx(e,{color:"textSecondary",gutterBottom:!0,children:"Completed"}),s.jsx(e,{variant:"h4",children:F?.completedTasks||0})]})})}),s.jsx(n,{item:!0,xs:12,sm:6,md:4,children:s.jsx(d,{children:s.jsxs(c,{children:[s.jsx(e,{color:"textSecondary",gutterBottom:!0,children:"In Progress"}),s.jsx(e,{variant:"h4",children:F?.inProgressTasks||0})]})})})]}),s.jsxs(n,{container:!0,spacing:3,children:[s.jsx(n,{item:!0,xs:12,md:8,children:s.jsx(d,{children:s.jsxs(c,{children:[s.jsx(e,{variant:"h6",mb:2,children:"Dailly statistic"}),s.jsx(o,{width:"100%",height:300,children:s.jsxs(h,{data:I?.dailyStats||[],children:[s.jsx(j,{strokeDasharray:"3 3"}),s.jsx(m,{dataKey:"date"}),s.jsx(p,{}),s.jsx(y,{}),s.jsx(u,{dataKey:"created",fill:"#8884d8",name:"Створено"}),s.jsx(u,{dataKey:"completed",fill:"#82ca9d",name:"Completed"})]})})]})})}),s.jsx(n,{item:!0,xs:12,md:4,children:s.jsx(d,{children:s.jsxs(c,{children:[s.jsx(e,{variant:"h6",mb:2,children:"By prioirity"}),s.jsx(o,{width:"100%",height:300,children:s.jsxs(g,{children:[s.jsx(f,{data:I?.priorityStats||[],cx:"50%",cy:"50%",labelLine:!1,label:({priority:s,count:a})=>`${s}: ${a}`,outerRadius:80,fill:"#8884d8",dataKey:"count",children:(I?.priorityStats||[]).map(((a,t)=>s.jsx(b,{fill:v[t%v.length]},`cell-${t}`)))}),s.jsx(y,{})]})})]})})})]})]})}export{B as default};
