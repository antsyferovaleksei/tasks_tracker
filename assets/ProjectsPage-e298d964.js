import{j as e,B as s,U as n,g as i,m as t,W as a,a5 as r,a6 as l,a7 as c,F as o,I as d,a8 as x,a9 as j,s as h,ac as m,ad as p,ae as u,h as g,ag as f}from"./mui-56a233f4.js";import{r as y}from"./vendor-2c736f18.js";import{f as v,n as b,o as C,p as P}from"./index-884950cc.js";import{b as k}from"./index-2d5a8536.js";import"./utils-18e1ec00.js";function w(){const[w,I]=y.useState(!1),[A,W]=y.useState(null),[z,S]=y.useState(!1),[D,E]=y.useState(null),[L,$]=y.useState({name:"",description:"",color:"#2196f3",archived:!1}),{projects:q=[],isLoading:B}=v(),F=b(),H=C(),R=P(),U=()=>{I(!1),W(null),$({name:"",description:"",color:"#2196f3",archived:!1})};return B?e.jsx(s,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:e.jsx(n,{size:60})}):e.jsxs(s,{p:3,children:[e.jsxs(s,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsx(i,{variant:"h4",component:"h1",children:"Projects"}),e.jsx(t,{variant:"contained",startIcon:e.jsx(a,{}),onClick:()=>I(!0),children:"Add project"})]}),e.jsx(r,{container:!0,spacing:3,children:q.map((n=>e.jsx(r,{item:!0,xs:12,sm:6,md:4,children:e.jsx(l,{sx:{borderLeft:`4px solid ${n.color}`,"&:hover":{boxShadow:4,transform:"translateY(-2px)"},transition:"all 0.2s ease-in-out"},children:e.jsxs(c,{children:[e.jsxs(s,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2,children:[e.jsxs(s,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(o,{sx:{color:n.color}}),e.jsx(i,{variant:"h6",component:"h3",children:n.name})]}),e.jsxs(s,{children:[e.jsx(d,{size:"small",onClick:()=>(e=>{W(e),$({name:e.name,description:e.description||"",color:e.color||"#2196f3",archived:e.archived||!1}),I(!0)})(n),title:"Edit project",children:e.jsx(x,{})}),e.jsx(d,{size:"small",color:"error",onClick:()=>(e=>{E(e),S(!0)})(n),title:"Delete project",children:e.jsx(j,{})})]})]}),n.description&&e.jsx(i,{variant:"body2",color:"text.secondary",mb:2,children:n.description}),e.jsxs(s,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(h,{label:`${n._count?.tasks||0} tasks`,size:"small",variant:"outlined"}),e.jsx(i,{variant:"caption",color:"text.secondary",children:k(n.createdAt)})]})]})})},n.id)))}),0===q.length&&e.jsx(s,{textAlign:"center",py:4,children:e.jsx(i,{variant:"h6",color:"text.secondary",children:"Projects не знайдено"})}),e.jsxs(m,{open:w,onClose:U,maxWidth:"sm",fullWidth:!0,children:[e.jsx(p,{children:A?"Edit project":"Create project"}),e.jsx(u,{children:e.jsxs(s,{display:"flex",flexDirection:"column",gap:2,pt:1,children:[e.jsx(g,{label:"Project name",value:L.name,onChange:e=>$({...L,name:e.target.value}),required:!0,fullWidth:!0}),e.jsx(g,{label:"Description",value:L.description,onChange:e=>$({...L,description:e.target.value}),multiline:!0,rows:3,fullWidth:!0}),e.jsxs(s,{children:[e.jsx(i,{variant:"subtitle2",mb:1,children:"Project color"}),e.jsx("input",{type:"color",value:L.color,onChange:e=>$({...L,color:e.target.value}),style:{width:"100%",height:"40px",border:"none",borderRadius:"4px"}})]})]})}),e.jsxs(f,{children:[e.jsx(t,{onClick:U,disabled:F.isPending||H.isPending,children:"Cancel"}),e.jsx(t,{onClick:A?async()=>{if(A&&L.name.trim())try{await H.mutateAsync({id:A.id,data:L}),U()}catch(e){}}:async()=>{if(L.name.trim())try{await F.mutateAsync(L);U()}catch(e){}},variant:"contained",disabled:!L.name.trim()||F.isPending||H.isPending,startIcon:F.isPending||H.isPending?e.jsx(n,{size:20}):null,children:A?H.isPending?"Оновлення...":"Оновити":F.isPending?"Creating...":"Create"})]})]}),e.jsxs(m,{open:z,onClose:()=>S(!1),maxWidth:"sm",fullWidth:!0,children:[e.jsx(p,{children:"Підтвердження видалення"}),e.jsxs(u,{children:[e.jsxs(i,{children:["Are you sure you want to delete project ",e.jsxs("strong",{children:['"',D?.name,'"']}),"?"]}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Ця дія незворотна. All task в цьому projectі також будуть видалені."})]}),e.jsxs(f,{children:[e.jsx(t,{onClick:()=>S(!1),disabled:R.isPending,children:"Cancel"}),e.jsx(t,{onClick:async()=>{if(D)try{await R.mutateAsync(D.id),S(!1),E(null)}catch(e){}},variant:"contained",color:"error",disabled:R.isPending,startIcon:R.isPending?e.jsx(n,{size:20}):null,children:R.isPending?"Deleting...":"Delete"})]})]})]})}export{w as default};
