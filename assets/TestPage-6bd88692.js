import{j as e,B as a,g as s,X as r,a6 as t,a7 as n,h as i,m as c,U as o}from"./mui-56a233f4.js";import{r as l}from"./vendor-2c736f18.js";import{v as d}from"./index-884950cc.js";import"./utils-18e1ec00.js";function j(){const[j,x]=l.useState(!1),[m,h]=l.useState(""),[u,p]=l.useState(""),[g,v]=l.useState({email:"admin@admin.com",password:"admin123"}),[b,y]=l.useState({name:"Test Project з UI",description:"Project description created with UI",color:"#2196f3",archived:!1}),[f,C]=l.useState(!1),[w,S]=l.useState([]),P=async()=>{try{const e=await d.getProjects();e.success&&e.data&&S(e.data)}catch(e){h(e.response?.data?.message||"Loading error projects")}};return e.jsxs(a,{p:3,maxWidth:800,mx:"auto",children:[e.jsx(s,{variant:"h4",mb:3,children:"Тестова сторінка API"}),m&&e.jsx(r,{severity:"error",sx:{mb:2},children:m}),u&&e.jsx(r,{severity:"success",sx:{mb:2},children:u}),f?e.jsxs(a,{children:[e.jsx(t,{sx:{mb:3},children:e.jsxs(n,{children:[e.jsx(s,{variant:"h6",mb:2,children:"2. Create project"}),e.jsxs(a,{display:"flex",flexDirection:"column",gap:2,children:[e.jsx(i,{label:"Project name",value:b.name,onChange:e=>y({...b,name:e.target.value})}),e.jsx(i,{label:"Description",value:b.description,onChange:e=>y({...b,description:e.target.value}),multiline:!0,rows:3}),e.jsx(i,{label:"Color",type:"color",value:b.color,onChange:e=>y({...b,color:e.target.value})}),e.jsx(c,{variant:"contained",onClick:async()=>{x(!0),h("");try{(await d.createProject(b)).success&&(p("Project created successfully!"),P())}catch(e){h(e.response?.data?.message||"Error creating project")}finally{x(!1)}},disabled:j||!b.name,startIcon:j?e.jsx(o,{size:20}):null,children:j?"Creating...":"Create project"})]})]})}),e.jsx(t,{children:e.jsxs(n,{children:[e.jsx(s,{variant:"h6",mb:2,children:"3. Існуючі projectи"}),e.jsx(c,{onClick:P,variant:"outlined",sx:{mb:2},children:"Оновити список"}),w.length>0?w.map((r=>e.jsxs(a,{p:2,border:"1px solid #ddd",borderRadius:1,mb:1,children:[e.jsx(s,{variant:"subtitle1",children:r.name}),e.jsx(s,{variant:"body2",color:"text.secondary",children:r.description}),e.jsxs(s,{variant:"caption",children:["Створено: ",new Date(r.createdAt).toLocaleString()]})]},r.id))):e.jsx(s,{color:"text.secondary",children:"Projects не знайдено"})]})})]}):e.jsx(t,{sx:{mb:3},children:e.jsxs(n,{children:[e.jsx(s,{variant:"h6",mb:2,children:"1. Вхід в систему"}),e.jsxs(a,{display:"flex",flexDirection:"column",gap:2,children:[e.jsx(i,{label:"Email",type:"email",value:g.email,onChange:e=>v({...g,email:e.target.value})}),e.jsx(i,{label:"Password",type:"password",value:g.password,onChange:e=>v({...g,password:e.target.value})}),e.jsx(c,{variant:"contained",onClick:async()=>{x(!0),h("");try{const e=await d.login(g);e.success&&e.data&&(localStorage.setItem("accessToken",e.data.accessToken),localStorage.setItem("refreshToken",e.data.refreshToken),C(!0),p("Success login!"))}catch(e){h(e.response?.data?.message||"Login error")}finally{x(!1)}},disabled:j,startIcon:j?e.jsx(o,{size:20}):null,children:j?"Login...":"Login"})]})]})})]})}export{j as default};
